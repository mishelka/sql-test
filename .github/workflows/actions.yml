name: sql-test-action
on: [push]
jobs:
  check-bats-version:
    runs-on: ubuntu-latest
    steps:
      - name: checkout repo content
        uses: actions/checkout@v2 # checkout the repository content to github runner.
      - name: setup python
        uses: actions/setup-python@v2
        with:
          python-version: 3.8 #install the python needed
#      - name: update apt-get
#        run:
#          apt-get update
      - name: install pg server
        run:
          sudo apt-get install postgresql-server-dev-all
      - name: install pg client
        run:
          apt-get install --yes --no-install-recommends postgresql-client
      - name: install psycopg2 library
        run:
          pip3 install psycopg2-binary
      - name: execute py script # run the run.py to get the latest data
        run:
          python src/files/_test.py